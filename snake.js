const a0_0x3079c5=a0_0x4bb9;(function(_0x26c738,_0x3f5b62){const _0x35c56a=a0_0x4bb9,_0x446332=_0x26c738();while(!![]){try{const _0x565b0d=-parseInt(_0x35c56a(0x179))/0x1+-parseInt(_0x35c56a(0x16b))/0x2*(parseInt(_0x35c56a(0x18c))/0x3)+parseInt(_0x35c56a(0x1a0))/0x4+-parseInt(_0x35c56a(0x19f))/0x5+parseInt(_0x35c56a(0x1ad))/0x6+-parseInt(_0x35c56a(0x16f))/0x7*(-parseInt(_0x35c56a(0x193))/0x8)+parseInt(_0x35c56a(0x17d))/0x9*(parseInt(_0x35c56a(0x194))/0xa);if(_0x565b0d===_0x3f5b62)break;else _0x446332['push'](_0x446332['shift']());}catch(_0x1d4dec){_0x446332['push'](_0x446332['shift']());}}}(a0_0x3e87,0xac748));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x599534=a0_0x4bb9,_0x27e753={'canvas':document[_0x599534(0x1a5)](_0x599534(0x16e)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this['grid']=new ConsoleGrid(_0x27e753);const _0x25bfa9=document[_0x599534(0x1a5)](_0x599534(0x197));this[_0x599534(0x1a1)]=new Cout(_0x25bfa9),this[_0x599534(0x180)]=0x0,this['gameOver']=![],this[_0x599534(0x1af)]=new Snake(),this[_0x599534(0x1af)][_0x599534(0x1ab)](this[_0x599534(0x17e)]),Candy[_0x599534(0x19e)](),this[_0x599534(0x178)]=Candy[_0x599534(0x173)](this['snake'],this[_0x599534(0x17e)][_0x599534(0x171)],this[_0x599534(0x17e)]['colCount']),this['candy'][_0x599534(0x1ac)](this['grid']),this[_0x599534(0x17e)][_0x599534(0x185)](this[_0x599534(0x19b)]());}[a0_0x3079c5(0x187)](){const _0x5ef7a5=a0_0x3079c5,_0x456c66=this[_0x5ef7a5(0x180)],_0x389f92=this[_0x5ef7a5(0x1af)][_0x5ef7a5(0x18f)]();return _0x456c66==0x0?0x0:0x1*_0x389f92*_0x389f92/_0x456c66;}['statusString'](_0xa88dc){const _0x27eb73=a0_0x3079c5;let _0x637f3a=_0x27eb73(0x184)+this[_0x27eb73(0x1af)][_0x27eb73(0x18f)]()+_0x27eb73(0x170)+this[_0x27eb73(0x180)]+_0x27eb73(0x176)+this[_0x27eb73(0x187)]()[_0x27eb73(0x1b0)](0x3);if(_0xa88dc)_0x637f3a+='.\x20'+_0xa88dc;return _0x637f3a;}[a0_0x3079c5(0x199)](_0x27020c){const _0x189422=a0_0x3079c5;let _0x2dbcfe='';switch(_0x27020c){case _0x189422(0x1b2):case _0x189422(0x189):case _0x189422(0x183):case'ArrowDown':this[_0x189422(0x1af)][_0x189422(0x190)](_0x27020c,this['grid'],this['candy'][_0x189422(0x181)],this[_0x189422(0x178)][_0x189422(0x17f)]);break;case'Q':case'q':this[_0x189422(0x198)]=!![];default:break;}!this[_0x189422(0x198)]&&(this[_0x189422(0x1af)][_0x189422(0x186)](this[_0x189422(0x17e)])?(this['gameOver']=!![],_0x2dbcfe=_0x189422(0x174)):(this['snake'][_0x189422(0x1a6)](this[_0x189422(0x17e)]),this[_0x189422(0x1af)][_0x189422(0x195)](this[_0x189422(0x178)][_0x189422(0x181)],this['candy']['col'])&&(this['snake'][_0x189422(0x18a)](this[_0x189422(0x178)][_0x189422(0x1b1)]),this['snake'][_0x189422(0x191)]=this[_0x189422(0x178)][_0x189422(0x191)],this[_0x189422(0x1af)][_0x189422(0x1ab)](this['grid']),this[_0x189422(0x178)]=Candy[_0x189422(0x173)](this[_0x189422(0x1af)],this['grid'][_0x189422(0x171)],this['grid'][_0x189422(0x177)]),this[_0x189422(0x178)][_0x189422(0x1ac)](this[_0x189422(0x17e)]))),this[_0x189422(0x180)]++,this['grid'][_0x189422(0x185)](this[_0x189422(0x19b)](_0x2dbcfe))),this[_0x189422(0x17e)][_0x189422(0x185)](this['statusString'](_0x2dbcfe));}}class ListNode{constructor(_0x3bc093,_0x43969b=null){const _0x28a81f=a0_0x3079c5;this['value']=_0x3bc093,this[_0x28a81f(0x175)]=_0x43969b;}}class LinkedList{constructor(){const _0xc2fe8a=a0_0x3079c5;this[_0xc2fe8a(0x17b)]=null;}[a0_0x3079c5(0x19d)](_0x1fdb43){const _0x282817=a0_0x3079c5;this['head']=new ListNode(_0x1fdb43,this[_0x282817(0x17b)]);}[a0_0x3079c5(0x192)](){const _0x38231e=a0_0x3079c5;this['head']&&(this['head']=this[_0x38231e(0x17b)]['next']);}[a0_0x3079c5(0x18d)](_0x437ef6){const _0x4c9c7a=a0_0x3079c5,_0x32f189=this['tail'](),_0xe4f41e=new ListNode(_0x437ef6);_0x32f189?_0x32f189[_0x4c9c7a(0x175)]=_0xe4f41e:this['head']=_0xe4f41e;}[a0_0x3079c5(0x196)](){const _0x53f92b=a0_0x3079c5,_0x48e1ea=this[_0x53f92b(0x19c)]();if(_0x48e1ea){if(this[_0x53f92b(0x17b)]==_0x48e1ea)this['head']=null;else{let _0x5b2d8c=this[_0x53f92b(0x17b)];while(_0x5b2d8c[_0x53f92b(0x175)]!=_0x48e1ea)_0x5b2d8c=_0x5b2d8c[_0x53f92b(0x175)];_0x5b2d8c[_0x53f92b(0x175)]=null;}}}['tail'](){const _0x2f5dd3=a0_0x3079c5;let _0xe8ab=null;for(let _0x2f3614=this['head'];_0x2f3614;_0x2f3614=_0x2f3614[_0x2f5dd3(0x175)]){_0xe8ab=_0x2f3614;}return _0xe8ab;}['length'](){const _0x468636=a0_0x3079c5;let _0x67a305=0x0;for(let _0x43ab04=this[_0x468636(0x17b)];_0x43ab04;_0x43ab04=_0x43ab04[_0x468636(0x175)]){_0x67a305++;}return _0x67a305;}}class Snake extends LinkedList{constructor(){const _0x5b3dd1=a0_0x3079c5;super(),this[_0x5b3dd1(0x1b1)]=0x0,this[_0x5b3dd1(0x191)]=_0x5b3dd1(0x16a),this['glyph']='o',this[_0x5b3dd1(0x1a3)]='@',this[_0x5b3dd1(0x17c)]=0x0,this[_0x5b3dd1(0x1a7)]=0x1,this[_0x5b3dd1(0x18d)]({'row':0x5,'col':0x5}),this[_0x5b3dd1(0x18d)]({'row':0x5,'col':0x4}),this[_0x5b3dd1(0x18d)]({'row':0x5,'col':0x3});}[a0_0x3079c5(0x186)](_0x404830){const _0x571df2=a0_0x3079c5,_0xe309f6=this[_0x571df2(0x17b)][_0x571df2(0x18e)][_0x571df2(0x181)]+this[_0x571df2(0x17c)],_0x229f7b=this[_0x571df2(0x17b)]['value'][_0x571df2(0x17f)]+this[_0x571df2(0x1a7)],_0x541b28=_0xe309f6>=0x0&&_0xe309f6<_0x404830[_0x571df2(0x171)]&&_0x229f7b>=0x0&&_0x229f7b<_0x404830[_0x571df2(0x177)];return!_0x541b28||this[_0x571df2(0x18b)](_0xe309f6,_0x229f7b);}[a0_0x3079c5(0x195)](_0x148b9b,_0x355578){const _0x30faf3=a0_0x3079c5;return this[_0x30faf3(0x17b)][_0x30faf3(0x18e)]['row']==_0x148b9b&&this[_0x30faf3(0x17b)]['value'][_0x30faf3(0x17f)]==_0x355578;}[a0_0x3079c5(0x18b)](_0x3498da,_0x51762d){const _0x24ba46=a0_0x3079c5;let _0x168b95=![],_0x3a0c7a=this['head'];while(_0x3a0c7a){if(_0x3a0c7a[_0x24ba46(0x18e)][_0x24ba46(0x181)]==_0x3498da&&_0x3a0c7a[_0x24ba46(0x18e)][_0x24ba46(0x17f)]==_0x51762d){_0x168b95=!![];break;}_0x3a0c7a=_0x3a0c7a[_0x24ba46(0x175)];}return _0x168b95;}[a0_0x3079c5(0x1ab)](_0xe905a9){const _0x5dff72=a0_0x3079c5;let _0x5a0591=this[_0x5dff72(0x1a3)];for(let _0x5a8ec8=this['head'];_0x5a8ec8;_0x5a8ec8=_0x5a8ec8[_0x5dff72(0x175)]){_0xe905a9[_0x5dff72(0x16d)](_0x5a8ec8[_0x5dff72(0x18e)]['row'],_0x5a8ec8[_0x5dff72(0x18e)][_0x5dff72(0x17f)],_0x5a0591,this[_0x5dff72(0x191)]),_0x5a0591=this[_0x5dff72(0x19a)];}}[a0_0x3079c5(0x190)](_0xf0084b,_0x145fe5,_0x139567,_0x83a7e5){const _0x5c33a0=a0_0x3079c5;this[_0x5c33a0(0x17c)]=0x0,this[_0x5c33a0(0x1a7)]=0x0;switch(_0xf0084b){case _0x5c33a0(0x1b2):this[_0x5c33a0(0x1a7)]=-0x1;break;case _0x5c33a0(0x189):this[_0x5c33a0(0x1a7)]=0x1;break;case _0x5c33a0(0x183):this['dRow']=-0x1;break;case _0x5c33a0(0x172):this[_0x5c33a0(0x17c)]=0x1;break;default:break;}}[a0_0x3079c5(0x1a6)](_0x15e2b8){const _0x290bb7=a0_0x3079c5;let _0x30d679=this[_0x290bb7(0x17b)][_0x290bb7(0x18e)][_0x290bb7(0x181)]+this['dRow'],_0x2ae51d=this[_0x290bb7(0x17b)]['value'][_0x290bb7(0x17f)]+this[_0x290bb7(0x1a7)];_0x15e2b8[_0x290bb7(0x16d)](this[_0x290bb7(0x17b)][_0x290bb7(0x18e)]['row'],this[_0x290bb7(0x17b)][_0x290bb7(0x18e)][_0x290bb7(0x17f)],this['glyph'],this[_0x290bb7(0x191)]),this[_0x290bb7(0x19d)]({'row':_0x30d679,'col':_0x2ae51d}),_0x15e2b8['drawCharAt'](_0x30d679,_0x2ae51d,this[_0x290bb7(0x1a3)],this[_0x290bb7(0x191)]);if(this[_0x290bb7(0x1b1)]>0x0)this[_0x290bb7(0x1b1)]--;else{const _0x5d6979=this['tail']();_0x15e2b8['eraseCharAt'](_0x5d6979['value'][_0x290bb7(0x181)],_0x5d6979[_0x290bb7(0x18e)][_0x290bb7(0x17f)]),this[_0x290bb7(0x196)]();}}[a0_0x3079c5(0x18a)](_0x3510d1){const _0x20cf6c=a0_0x3079c5;this[_0x20cf6c(0x1b1)]+=_0x3510d1;}}function a0_0x4bb9(_0x1ee119,_0x2b8da4){const _0x3e8737=a0_0x3e87();return a0_0x4bb9=function(_0x4bb959,_0x5ccf8d){_0x4bb959=_0x4bb959-0x16a;let _0x4f8764=_0x3e8737[_0x4bb959];return _0x4f8764;},a0_0x4bb9(_0x1ee119,_0x2b8da4);}function a0_0x3e87(){const _0x112507=['step','dCol','randomColor','randBetween','orange','drawChars','draw','1779252LzMBWe','yellow','snake','toFixed','calories','ArrowLeft','rand','magenta','white','874IiTGNL','pink','drawCharAt','main-canvas','455dMMJQd','\x20Turns:\x20','rowCount','ArrowDown','randomCandy','Ouch,\x20my\x20nose!','next','.\x20Metric:\x20','colCount','candy','27707HTshVF','randomPosition','head','dRow','12141999dRFNrn','grid','col','turnCount','row','Random','ArrowUp','Length:\x20','setStatusLine','willCrash','metric','seed','ArrowRight','eat','intersects','7734bSPlLV','pushBack','value','length','steer','color','popFront','57176xtaorB','10aSVbRJ','headIntersects','popBack','cout-lines','gameOver','keydown','glyph','statusString','tail','pushFront','seedRandom','6355715kcjGPs','4086416UYZRZV','cout','red','headGlyph','setSeed','getElementById'];a0_0x3e87=function(){return _0x112507;};return a0_0x3e87();}class Candy{static[a0_0x3079c5(0x19e)](){this['Random']=new RandANSI();}constructor(_0x5f0e8a){Object['assign'](this,_0x5f0e8a);}static[a0_0x3079c5(0x173)](_0x11ca87,_0x4e1589,_0x38941){const _0x46bd00=a0_0x3079c5,{row:_0x1b174b,col:_0x270275}=this[_0x46bd00(0x17a)](_0x11ca87,_0x4e1589,_0x38941),_0x5dd8e1=this[_0x46bd00(0x1a8)](),_0x3d55bb=Candy[_0x46bd00(0x182)][_0x46bd00(0x1a9)](0x1,0xa),_0x279ab6=''+_0x3d55bb;return new Candy({'row':_0x1b174b,'col':_0x270275,'calories':_0x3d55bb,'glyph':_0x279ab6,'color':_0x5dd8e1});}static[a0_0x3079c5(0x17a)](_0x3fa7a7,_0x18e98a,_0x1e3264){const _0x31247e=a0_0x3079c5;let _0x326453,_0x4bfbe3;do{_0x326453=Candy[_0x31247e(0x182)][_0x31247e(0x1a9)](0x0,_0x18e98a),_0x4bfbe3=Candy['Random'][_0x31247e(0x1a9)](0x0,_0x1e3264);}while(_0x3fa7a7[_0x31247e(0x18b)](_0x326453,_0x4bfbe3));return{'row':_0x326453,'col':_0x4bfbe3};}static[a0_0x3079c5(0x1a8)](){const _0x44054c=a0_0x3079c5,_0x409148=[_0x44054c(0x1a2),'lime',_0x44054c(0x1ae),'cyan',_0x44054c(0x1b4),_0x44054c(0x1aa),_0x44054c(0x16c)];return _0x409148[Candy['Random'][_0x44054c(0x1a9)](0x0,_0x409148[_0x44054c(0x18f)])];}[a0_0x3079c5(0x1ac)](_0x248cbc){const _0x4a5881=a0_0x3079c5;_0x248cbc[_0x4a5881(0x16d)](this[_0x4a5881(0x181)],this[_0x4a5881(0x17f)],this[_0x4a5881(0x19a)],this['color']);}}class RandANSI{constructor(_0x9d0f11=0x1){this['seed']=_0x9d0f11;}[a0_0x3079c5(0x1a4)](_0x23b658){const _0x3f1d53=a0_0x3079c5;this[_0x3f1d53(0x188)]=_0x23b658;}[a0_0x3079c5(0x1b3)](){const _0x2d0cfb=a0_0x3079c5;return(this[_0x2d0cfb(0x188)]=Number((BigInt(this[_0x2d0cfb(0x188)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}['randBetween'](_0x11e72b,_0x2aaff1){const _0xb9d9ae=a0_0x3079c5;return _0x11e72b+this[_0xb9d9ae(0x1b3)]()%(_0x2aaff1-_0x11e72b);}}
const a0_0x3a5dab=a0_0x5b24;(function(_0x90ee2f,_0x2d9e8d){const _0x210904=a0_0x5b24,_0x44f555=_0x90ee2f();while(!![]){try{const _0x18411f=parseInt(_0x210904(0xf0))/0x1*(parseInt(_0x210904(0x118))/0x2)+parseInt(_0x210904(0xe9))/0x3*(parseInt(_0x210904(0xd8))/0x4)+-parseInt(_0x210904(0x104))/0x5+-parseInt(_0x210904(0xd5))/0x6+-parseInt(_0x210904(0xec))/0x7*(-parseInt(_0x210904(0xdb))/0x8)+-parseInt(_0x210904(0xe7))/0x9*(parseInt(_0x210904(0xda))/0xa)+parseInt(_0x210904(0x10a))/0xb;if(_0x18411f===_0x2d9e8d)break;else _0x44f555['push'](_0x44f555['shift']());}catch(_0x4055de){_0x44f555['push'](_0x44f555['shift']());}}}(a0_0x373b,0x8b5b7));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x25a435=a0_0x5b24,_0x498bce={'canvas':document['getElementById']('main-canvas'),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x25a435(0x111)]=0x64,this[_0x25a435(0x119)]=new ConsoleGrid(_0x498bce);const _0x356af7=document[_0x25a435(0xf5)](_0x25a435(0x113));this[_0x25a435(0xf4)]=new Cout(_0x356af7),this[_0x25a435(0x107)]=0x0,this[_0x25a435(0x106)]=![],this[_0x25a435(0xe5)]=new Snake(),this['snake'][_0x25a435(0xd9)](this[_0x25a435(0x119)]),Candy[_0x25a435(0xe3)](),this[_0x25a435(0xe0)]=Candy[_0x25a435(0x114)](this[_0x25a435(0xe5)],this[_0x25a435(0x119)][_0x25a435(0xfd)],this['grid'][_0x25a435(0xe2)]),this['candy']['draw'](this[_0x25a435(0x119)]),this[_0x25a435(0x119)]['setStatusLine'](this[_0x25a435(0xfb)]());}['metric'](){const _0x34fe65=a0_0x5b24,_0x1f115b=this[_0x34fe65(0x107)],_0x57747f=this['snake'][_0x34fe65(0x116)]();return _0x1f115b==0x0?0x0:0x1*_0x57747f*_0x57747f/_0x1f115b;}[a0_0x3a5dab(0xfb)](_0x539a4b){const _0x4ee505=a0_0x3a5dab;let _0x14224c=_0x4ee505(0xeb)+this['snake'][_0x4ee505(0x116)]()+_0x4ee505(0xea)+this['turnCount']+_0x4ee505(0xf9)+this['metric']()[_0x4ee505(0x10b)](0x3);if(_0x539a4b)_0x14224c+='.\x20'+_0x539a4b;return _0x14224c;}[a0_0x3a5dab(0x112)](_0x196958){const _0x4bee70=a0_0x3a5dab;let _0x3204d8='';switch(_0x196958){case _0x4bee70(0xd6):case _0x4bee70(0xf7):case _0x4bee70(0xd7):case _0x4bee70(0xf1):this[_0x4bee70(0xe5)][_0x4bee70(0xf8)](_0x196958,this[_0x4bee70(0x119)],this[_0x4bee70(0xe0)][_0x4bee70(0xdc)],this['candy']['col']);break;case'Q':case'q':this[_0x4bee70(0x106)]=!![];default:break;}!this[_0x4bee70(0x106)]&&(this[_0x4bee70(0xe5)][_0x4bee70(0xdd)](this[_0x4bee70(0x119)])?(this[_0x4bee70(0x106)]=!![],_0x3204d8=_0x4bee70(0x100)):(this[_0x4bee70(0xe5)][_0x4bee70(0x117)](this[_0x4bee70(0x119)]),this[_0x4bee70(0xe5)][_0x4bee70(0x115)](this[_0x4bee70(0xe0)][_0x4bee70(0xdc)],this['candy'][_0x4bee70(0x10d)])&&(this[_0x4bee70(0xe5)]['eat'](this[_0x4bee70(0xe0)]['calories']),this['snake']['color']=this[_0x4bee70(0xe0)]['color'],this[_0x4bee70(0xe5)][_0x4bee70(0xd9)](this['grid']),this[_0x4bee70(0xe0)]=Candy[_0x4bee70(0x114)](this[_0x4bee70(0xe5)],this[_0x4bee70(0x119)][_0x4bee70(0xfd)],this[_0x4bee70(0x119)][_0x4bee70(0xe2)]),this[_0x4bee70(0xe0)][_0x4bee70(0xcf)](this['grid']))),this[_0x4bee70(0x107)]++,this['grid'][_0x4bee70(0xed)](this[_0x4bee70(0xfb)](_0x3204d8))),this[_0x4bee70(0x119)][_0x4bee70(0xed)](this[_0x4bee70(0xfb)](_0x3204d8));}['contestStatus'](){const _0x2d722d=a0_0x3a5dab,_0x744408=this[_0x2d722d(0x107)],_0x24260c=this['snake'][_0x2d722d(0x116)](),_0xb80412=this['metric']();return{'turnCount':_0x744408,'length':_0x24260c,'metric':_0xb80412};}}function a0_0x373b(){const _0xf18f22=['tail','pink','5304450fxaRMx','next','gameOver','turnCount','yellow','popBack','7386808mnfBUu','toFixed','intersects','col','dRow','headGlyph','pushBack','sleepTimeout','keydown','cout-lines','randomCandy','headIntersects','length','step','2SmIxVf','grid','glyph','draw','value','popFront','eat','rand','eraseCharAt','4557990WIzSUy','ArrowLeft','ArrowUp','125752nsJlUP','drawChars','58490BsCmVo','3112GanKHW','row','willCrash','dCol','calories','candy','white','colCount','seedRandom','randomColor','snake','color','360GBpLxv','red','33ySbgIE','\x20Turns:\x20','Length:\x20','16079GlsMIH','setStatusLine','seed','randBetween','714443mwoUlG','ArrowDown','drawCharAt','cyan','cout','getElementById','head','ArrowRight','steer','.\x20Metric:\x20','setSeed','statusString','assign','rowCount','orange','Random','Ouch,\x20my\x20nose!','pushFront'];a0_0x373b=function(){return _0xf18f22;};return a0_0x373b();}class ListNode{constructor(_0x2f0303,_0x526c5a=null){const _0xeea3af=a0_0x3a5dab;this['value']=_0x2f0303,this[_0xeea3af(0x105)]=_0x526c5a;}}class LinkedList{constructor(){this['head']=null;}[a0_0x3a5dab(0x101)](_0x102621){const _0x363d5f=a0_0x3a5dab;this['head']=new ListNode(_0x102621,this[_0x363d5f(0xf6)]);}[a0_0x3a5dab(0xd1)](){const _0x7b70ac=a0_0x3a5dab;this[_0x7b70ac(0xf6)]&&(this['head']=this[_0x7b70ac(0xf6)][_0x7b70ac(0x105)]);}[a0_0x3a5dab(0x110)](_0xd97c55){const _0x219b17=a0_0x3a5dab,_0x1bad11=this['tail'](),_0x8e37c0=new ListNode(_0xd97c55);_0x1bad11?_0x1bad11[_0x219b17(0x105)]=_0x8e37c0:this['head']=_0x8e37c0;}[a0_0x3a5dab(0x109)](){const _0x42d46e=a0_0x3a5dab,_0x8056a8=this[_0x42d46e(0x102)]();if(_0x8056a8){if(this[_0x42d46e(0xf6)]==_0x8056a8)this[_0x42d46e(0xf6)]=null;else{let _0x510939=this['head'];while(_0x510939[_0x42d46e(0x105)]!=_0x8056a8)_0x510939=_0x510939[_0x42d46e(0x105)];_0x510939[_0x42d46e(0x105)]=null;}}}[a0_0x3a5dab(0x102)](){const _0xc7af31=a0_0x3a5dab;let _0x43c2e2=null;for(let _0x341784=this[_0xc7af31(0xf6)];_0x341784;_0x341784=_0x341784['next']){_0x43c2e2=_0x341784;}return _0x43c2e2;}[a0_0x3a5dab(0x116)](){const _0x310289=a0_0x3a5dab;let _0xb29e9f=0x0;for(let _0x3435ce=this[_0x310289(0xf6)];_0x3435ce;_0x3435ce=_0x3435ce[_0x310289(0x105)]){_0xb29e9f++;}return _0xb29e9f;}}class Snake extends LinkedList{constructor(){const _0x28c902=a0_0x3a5dab;super(),this[_0x28c902(0xdf)]=0x0,this[_0x28c902(0xe6)]=_0x28c902(0xe1),this['glyph']='o',this[_0x28c902(0x10f)]='@',this['dRow']=0x0,this[_0x28c902(0xde)]=0x1,this[_0x28c902(0x110)]({'row':0x5,'col':0x5}),this[_0x28c902(0x110)]({'row':0x5,'col':0x4}),this['pushBack']({'row':0x5,'col':0x3});}[a0_0x3a5dab(0xdd)](_0x2724f6){const _0x2bd519=a0_0x3a5dab,_0x43fde6=this[_0x2bd519(0xf6)]['value']['row']+this[_0x2bd519(0x10e)],_0x526b68=this[_0x2bd519(0xf6)][_0x2bd519(0xd0)][_0x2bd519(0x10d)]+this['dCol'],_0x2608e1=_0x43fde6>=0x0&&_0x43fde6<_0x2724f6[_0x2bd519(0xfd)]&&_0x526b68>=0x0&&_0x526b68<_0x2724f6[_0x2bd519(0xe2)];return!_0x2608e1||this['intersects'](_0x43fde6,_0x526b68);}[a0_0x3a5dab(0x115)](_0x2138e6,_0x2ace0f){const _0x816c15=a0_0x3a5dab;return this[_0x816c15(0xf6)][_0x816c15(0xd0)][_0x816c15(0xdc)]==_0x2138e6&&this['head'][_0x816c15(0xd0)][_0x816c15(0x10d)]==_0x2ace0f;}['intersects'](_0x1d0672,_0x200920){const _0x507fa0=a0_0x3a5dab;let _0x590afe=![],_0x3dee65=this[_0x507fa0(0xf6)];while(_0x3dee65){if(_0x3dee65['value']['row']==_0x1d0672&&_0x3dee65[_0x507fa0(0xd0)]['col']==_0x200920){_0x590afe=!![];break;}_0x3dee65=_0x3dee65[_0x507fa0(0x105)];}return _0x590afe;}[a0_0x3a5dab(0xd9)](_0x1740cb){const _0xcbe3b8=a0_0x3a5dab;let _0x4dde89=this[_0xcbe3b8(0x10f)];for(let _0x4ded4c=this[_0xcbe3b8(0xf6)];_0x4ded4c;_0x4ded4c=_0x4ded4c[_0xcbe3b8(0x105)]){_0x1740cb[_0xcbe3b8(0xf2)](_0x4ded4c[_0xcbe3b8(0xd0)][_0xcbe3b8(0xdc)],_0x4ded4c[_0xcbe3b8(0xd0)][_0xcbe3b8(0x10d)],_0x4dde89,this[_0xcbe3b8(0xe6)]),_0x4dde89=this[_0xcbe3b8(0x11a)];}}[a0_0x3a5dab(0xf8)](_0x45b300,_0x386fc1,_0x2380d0,_0x43bc62){const _0x29f1eb=a0_0x3a5dab;this[_0x29f1eb(0x10e)]=0x0,this[_0x29f1eb(0xde)]=0x0;switch(_0x45b300){case _0x29f1eb(0xd6):this[_0x29f1eb(0xde)]=-0x1;break;case _0x29f1eb(0xf7):this[_0x29f1eb(0xde)]=0x1;break;case'ArrowUp':this[_0x29f1eb(0x10e)]=-0x1;break;case _0x29f1eb(0xf1):this[_0x29f1eb(0x10e)]=0x1;break;default:break;}}[a0_0x3a5dab(0x117)](_0x27e501){const _0x613572=a0_0x3a5dab;let _0x4d8fe1=this[_0x613572(0xf6)]['value'][_0x613572(0xdc)]+this[_0x613572(0x10e)],_0x243fb3=this[_0x613572(0xf6)][_0x613572(0xd0)][_0x613572(0x10d)]+this[_0x613572(0xde)];_0x27e501[_0x613572(0xf2)](this[_0x613572(0xf6)][_0x613572(0xd0)]['row'],this[_0x613572(0xf6)][_0x613572(0xd0)][_0x613572(0x10d)],this[_0x613572(0x11a)],this[_0x613572(0xe6)]),this[_0x613572(0x101)]({'row':_0x4d8fe1,'col':_0x243fb3}),_0x27e501[_0x613572(0xf2)](_0x4d8fe1,_0x243fb3,this[_0x613572(0x10f)],this[_0x613572(0xe6)]);if(this[_0x613572(0xdf)]>0x0)this['calories']--;else{const _0x4d91be=this[_0x613572(0x102)]();_0x27e501[_0x613572(0xd4)](_0x4d91be['value'][_0x613572(0xdc)],_0x4d91be[_0x613572(0xd0)][_0x613572(0x10d)]),this[_0x613572(0x109)]();}}[a0_0x3a5dab(0xd2)](_0xa90e03){const _0x585eeb=a0_0x3a5dab;this[_0x585eeb(0xdf)]+=_0xa90e03;}}function a0_0x5b24(_0x2aa6b6,_0x21596b){const _0x373b54=a0_0x373b();return a0_0x5b24=function(_0x5b24d2,_0x2888ab){_0x5b24d2=_0x5b24d2-0xcf;let _0xf4bc20=_0x373b54[_0x5b24d2];return _0xf4bc20;},a0_0x5b24(_0x2aa6b6,_0x21596b);}class Candy{static[a0_0x3a5dab(0xe3)](){const _0x2631af=a0_0x3a5dab;this[_0x2631af(0xff)]=new RandANSI();}constructor(_0x10480f){const _0x264181=a0_0x3a5dab;Object[_0x264181(0xfc)](this,_0x10480f);}static[a0_0x3a5dab(0x114)](_0xe18b6,_0x3cf7e2,_0x5852a9){const _0x3e857b=a0_0x3a5dab,{row:_0x5ab677,col:_0x96f612}=this['randomPosition'](_0xe18b6,_0x3cf7e2,_0x5852a9),_0x303fa5=this[_0x3e857b(0xe4)](),_0x270e81=Candy[_0x3e857b(0xff)]['randBetween'](0x1,0xa),_0x570443=''+_0x270e81;return new Candy({'row':_0x5ab677,'col':_0x96f612,'calories':_0x270e81,'glyph':_0x570443,'color':_0x303fa5});}static['randomPosition'](_0x55f753,_0x5c4da1,_0x3c763b){const _0x18d71d=a0_0x3a5dab;let _0x295332,_0xbe954a;do{_0x295332=Candy[_0x18d71d(0xff)][_0x18d71d(0xef)](0x0,_0x5c4da1),_0xbe954a=Candy['Random'][_0x18d71d(0xef)](0x0,_0x3c763b);}while(_0x55f753[_0x18d71d(0x10c)](_0x295332,_0xbe954a));return{'row':_0x295332,'col':_0xbe954a};}static['randomColor'](){const _0x577c78=a0_0x3a5dab,_0x544e1d=[_0x577c78(0xe8),'lime',_0x577c78(0x108),_0x577c78(0xf3),'magenta',_0x577c78(0xfe),_0x577c78(0x103)];return _0x544e1d[Candy[_0x577c78(0xff)][_0x577c78(0xef)](0x0,_0x544e1d[_0x577c78(0x116)])];}[a0_0x3a5dab(0xcf)](_0x539d59){const _0x3a699b=a0_0x3a5dab;_0x539d59[_0x3a699b(0xf2)](this[_0x3a699b(0xdc)],this[_0x3a699b(0x10d)],this['glyph'],this[_0x3a699b(0xe6)]);}}class RandANSI{constructor(_0x3876e7=0x1){this['seed']=_0x3876e7;}[a0_0x3a5dab(0xfa)](_0x561852){const _0x16ca27=a0_0x3a5dab;this[_0x16ca27(0xee)]=_0x561852;}[a0_0x3a5dab(0xd3)](){return(this['seed']=Number((BigInt(this['seed'])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x3a5dab(0xef)](_0x1a63ad,_0xe9323c){const _0x337a1b=a0_0x3a5dab;return _0x1a63ad+this[_0x337a1b(0xd3)]()%(_0xe9323c-_0x1a63ad);}}
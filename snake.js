function a0_0x362e(){const _0x2b1f53=['drawChars','ArrowUp','28320DoqZXe','gameOver','cyan','sleepTimeout','\x20Turns:\x20','cout','drawCharAt','1029fZaCHO','dCol','setSeed','main-canvas','white','788460SeEiUk','549462Dbbufp','Length:\x20','magenta','value','red','headGlyph','rowCount','length','popBack','turnCount','Random','18wBuRJs','yellow','steer','grid','candy','29796NPxuOA','headIntersects','pushBack','snake','draw','seedRandom','row','intersects','randBetween','assign','tail','eat','head','randomColor','cout-lines','calories','randomCandy','metric','statusString','4890896oPqBAK','4627385JlgwOS','Ouch,\x20my\x20nose!','495jDxvqg','ArrowDown','seed','ArrowRight','14175640FhoQEr','eraseCharAt','toFixed','pushFront','colCount','next','dRow','willCrash','glyph','col','randomPosition','ArrowLeft','lime','rand','step','color','setStatusLine','keydown'];a0_0x362e=function(){return _0x2b1f53;};return a0_0x362e();}function a0_0x405f(_0x355f17,_0x30c0bf){const _0x362e6b=a0_0x362e();return a0_0x405f=function(_0x405f31,_0x3058ab){_0x405f31=_0x405f31-0x85;let _0x12877f=_0x362e6b[_0x405f31];return _0x12877f;},a0_0x405f(_0x355f17,_0x30c0bf);}const a0_0x4e84ff=a0_0x405f;(function(_0x1e6d23,_0x272075){const _0xd902b4=a0_0x405f,_0xa13818=_0x1e6d23();while(!![]){try{const _0x278889=parseInt(_0xd902b4(0x86))/0x1+-parseInt(_0xd902b4(0x87))/0x2+-parseInt(_0xd902b4(0xad))/0x3*(parseInt(_0xd902b4(0x97))/0x4)+parseInt(_0xd902b4(0xab))/0x5+-parseInt(_0xd902b4(0xc5))/0x6*(-parseInt(_0xd902b4(0xcc))/0x7)+parseInt(_0xd902b4(0xaa))/0x8*(parseInt(_0xd902b4(0x92))/0x9)+-parseInt(_0xd902b4(0xb1))/0xa;if(_0x278889===_0x272075)break;else _0xa13818['push'](_0xa13818['shift']());}catch(_0x3f9581){_0xa13818['push'](_0xa13818['shift']());}}}(a0_0x362e,0xad201));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0xcce920=a0_0x405f,_0x47a12a={'canvas':document['getElementById'](_0xcce920(0xcf)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0xcce920(0xc8)]=0x64,this[_0xcce920(0x95)]=new ConsoleGrid(_0x47a12a);const _0xfa17f6=document['getElementById'](_0xcce920(0xa5));this[_0xcce920(0xca)]=new Cout(_0xfa17f6),this[_0xcce920(0x90)]=0x0,this['gameOver']=![],this[_0xcce920(0x9a)]=new Snake(),this[_0xcce920(0x9a)][_0xcce920(0xc3)](this[_0xcce920(0x95)]),Candy[_0xcce920(0x9c)](),this['candy']=Candy[_0xcce920(0xa7)](this[_0xcce920(0x9a)],this[_0xcce920(0x95)][_0xcce920(0x8d)],this['grid'][_0xcce920(0xb5)]),this[_0xcce920(0x96)][_0xcce920(0x9b)](this[_0xcce920(0x95)]),this[_0xcce920(0x95)][_0xcce920(0xc1)](this[_0xcce920(0xa9)]());}['metric'](){const _0x1b13e9=a0_0x405f,_0x1d382a=this[_0x1b13e9(0x90)],_0x55b75c=this[_0x1b13e9(0x9a)][_0x1b13e9(0x8e)]();return _0x1d382a==0x0?0x0:0x1*_0x55b75c*_0x55b75c/_0x1d382a;}['statusString'](_0x1e39cc){const _0x4f9722=a0_0x405f;let _0x17a995=_0x4f9722(0x88)+this[_0x4f9722(0x9a)][_0x4f9722(0x8e)]()+_0x4f9722(0xc9)+this['turnCount']+'.\x20Metric:\x20'+this[_0x4f9722(0xa8)]()[_0x4f9722(0xb3)](0x3);if(_0x1e39cc)_0x17a995+='.\x20'+_0x1e39cc;return _0x17a995;}[a0_0x4e84ff(0xc2)](_0x30915c){const _0x235c79=a0_0x4e84ff;let _0x1b6565='';switch(_0x30915c){case _0x235c79(0xbc):case _0x235c79(0xb0):case _0x235c79(0xc4):case _0x235c79(0xae):this[_0x235c79(0x9a)][_0x235c79(0x94)](_0x30915c,this[_0x235c79(0x95)],this[_0x235c79(0x96)][_0x235c79(0x9d)],this[_0x235c79(0x96)][_0x235c79(0xba)]);break;case'Q':case'q':this[_0x235c79(0xc6)]=!![];default:break;}!this['gameOver']&&(this[_0x235c79(0x9a)][_0x235c79(0xb8)](this['grid'])?(this[_0x235c79(0xc6)]=!![],_0x1b6565=_0x235c79(0xac)):(this['snake'][_0x235c79(0xbf)](this['grid']),this[_0x235c79(0x9a)]['headIntersects'](this[_0x235c79(0x96)][_0x235c79(0x9d)],this[_0x235c79(0x96)][_0x235c79(0xba)])&&(this[_0x235c79(0x9a)]['eat'](this[_0x235c79(0x96)][_0x235c79(0xa6)]),this[_0x235c79(0x9a)][_0x235c79(0xc0)]=this[_0x235c79(0x96)][_0x235c79(0xc0)],this[_0x235c79(0x9a)][_0x235c79(0xc3)](this['grid']),this[_0x235c79(0x96)]=Candy[_0x235c79(0xa7)](this[_0x235c79(0x9a)],this[_0x235c79(0x95)][_0x235c79(0x8d)],this[_0x235c79(0x95)][_0x235c79(0xb5)]),this[_0x235c79(0x96)][_0x235c79(0x9b)](this['grid']))),this[_0x235c79(0x90)]++,this[_0x235c79(0x95)][_0x235c79(0xc1)](this[_0x235c79(0xa9)](_0x1b6565))),this[_0x235c79(0x95)][_0x235c79(0xc1)](this[_0x235c79(0xa9)](_0x1b6565));}}class ListNode{constructor(_0x5f565c,_0x539256=null){const _0x15c9ed=a0_0x4e84ff;this[_0x15c9ed(0x8a)]=_0x5f565c,this[_0x15c9ed(0xb6)]=_0x539256;}}class LinkedList{constructor(){const _0x18b2b9=a0_0x4e84ff;this[_0x18b2b9(0xa3)]=null;}[a0_0x4e84ff(0xb4)](_0x19a75c){const _0x457fc7=a0_0x4e84ff;this['head']=new ListNode(_0x19a75c,this[_0x457fc7(0xa3)]);}['popFront'](){const _0x4674c3=a0_0x4e84ff;this[_0x4674c3(0xa3)]&&(this['head']=this[_0x4674c3(0xa3)][_0x4674c3(0xb6)]);}[a0_0x4e84ff(0x99)](_0x4f3ccc){const _0x457024=a0_0x4e84ff,_0x22f388=this[_0x457024(0xa1)](),_0x3840ad=new ListNode(_0x4f3ccc);_0x22f388?_0x22f388[_0x457024(0xb6)]=_0x3840ad:this[_0x457024(0xa3)]=_0x3840ad;}[a0_0x4e84ff(0x8f)](){const _0x3a5190=a0_0x4e84ff,_0x339f5b=this[_0x3a5190(0xa1)]();if(_0x339f5b){if(this[_0x3a5190(0xa3)]==_0x339f5b)this['head']=null;else{let _0xd38e40=this[_0x3a5190(0xa3)];while(_0xd38e40[_0x3a5190(0xb6)]!=_0x339f5b)_0xd38e40=_0xd38e40[_0x3a5190(0xb6)];_0xd38e40[_0x3a5190(0xb6)]=null;}}}['tail'](){const _0x156680=a0_0x4e84ff;let _0x2770e2=null;for(let _0x8e5f8e=this[_0x156680(0xa3)];_0x8e5f8e;_0x8e5f8e=_0x8e5f8e[_0x156680(0xb6)]){_0x2770e2=_0x8e5f8e;}return _0x2770e2;}[a0_0x4e84ff(0x8e)](){const _0x57c520=a0_0x4e84ff;let _0x194c06=0x0;for(let _0xcf41b4=this[_0x57c520(0xa3)];_0xcf41b4;_0xcf41b4=_0xcf41b4['next']){_0x194c06++;}return _0x194c06;}}class Snake extends LinkedList{constructor(){const _0x2ec867=a0_0x4e84ff;super(),this[_0x2ec867(0xa6)]=0x0,this[_0x2ec867(0xc0)]=_0x2ec867(0x85),this[_0x2ec867(0xb9)]='o',this['headGlyph']='@',this[_0x2ec867(0xb7)]=0x0,this['dCol']=0x1,this[_0x2ec867(0x99)]({'row':0x5,'col':0x5}),this[_0x2ec867(0x99)]({'row':0x5,'col':0x4}),this[_0x2ec867(0x99)]({'row':0x5,'col':0x3});}[a0_0x4e84ff(0xb8)](_0x1a9787){const _0x22ce44=a0_0x4e84ff,_0x1c6422=this[_0x22ce44(0xa3)][_0x22ce44(0x8a)][_0x22ce44(0x9d)]+this[_0x22ce44(0xb7)],_0x283774=this[_0x22ce44(0xa3)][_0x22ce44(0x8a)][_0x22ce44(0xba)]+this[_0x22ce44(0xcd)],_0xbc1c05=_0x1c6422>=0x0&&_0x1c6422<_0x1a9787[_0x22ce44(0x8d)]&&_0x283774>=0x0&&_0x283774<_0x1a9787[_0x22ce44(0xb5)];return!_0xbc1c05||this[_0x22ce44(0x9e)](_0x1c6422,_0x283774);}[a0_0x4e84ff(0x98)](_0x190a4d,_0x1c61c1){const _0x44610a=a0_0x4e84ff;return this[_0x44610a(0xa3)][_0x44610a(0x8a)][_0x44610a(0x9d)]==_0x190a4d&&this[_0x44610a(0xa3)][_0x44610a(0x8a)]['col']==_0x1c61c1;}['intersects'](_0x515b7c,_0x7169b5){const _0x4cb8c0=a0_0x4e84ff;let _0x462fd3=![],_0x1731d2=this[_0x4cb8c0(0xa3)];while(_0x1731d2){if(_0x1731d2[_0x4cb8c0(0x8a)][_0x4cb8c0(0x9d)]==_0x515b7c&&_0x1731d2[_0x4cb8c0(0x8a)][_0x4cb8c0(0xba)]==_0x7169b5){_0x462fd3=!![];break;}_0x1731d2=_0x1731d2[_0x4cb8c0(0xb6)];}return _0x462fd3;}[a0_0x4e84ff(0xc3)](_0x1b6fc7){const _0x4b7d3d=a0_0x4e84ff;let _0x26c2b7=this['headGlyph'];for(let _0x4bda3f=this[_0x4b7d3d(0xa3)];_0x4bda3f;_0x4bda3f=_0x4bda3f[_0x4b7d3d(0xb6)]){_0x1b6fc7[_0x4b7d3d(0xcb)](_0x4bda3f['value']['row'],_0x4bda3f['value'][_0x4b7d3d(0xba)],_0x26c2b7,this[_0x4b7d3d(0xc0)]),_0x26c2b7=this['glyph'];}}['steer'](_0x21840b,_0x2de8d1,_0x55294d,_0xb8610d){const _0x2e0d76=a0_0x4e84ff;this[_0x2e0d76(0xb7)]=0x0,this['dCol']=0x0;switch(_0x21840b){case _0x2e0d76(0xbc):this[_0x2e0d76(0xcd)]=-0x1;break;case _0x2e0d76(0xb0):this[_0x2e0d76(0xcd)]=0x1;break;case _0x2e0d76(0xc4):this[_0x2e0d76(0xb7)]=-0x1;break;case _0x2e0d76(0xae):this[_0x2e0d76(0xb7)]=0x1;break;default:break;}}['step'](_0x2f9ed1){const _0x5d2c08=a0_0x4e84ff;let _0x3ed945=this[_0x5d2c08(0xa3)][_0x5d2c08(0x8a)][_0x5d2c08(0x9d)]+this['dRow'],_0x36fdc8=this[_0x5d2c08(0xa3)]['value'][_0x5d2c08(0xba)]+this[_0x5d2c08(0xcd)];_0x2f9ed1[_0x5d2c08(0xcb)](this[_0x5d2c08(0xa3)][_0x5d2c08(0x8a)][_0x5d2c08(0x9d)],this[_0x5d2c08(0xa3)][_0x5d2c08(0x8a)][_0x5d2c08(0xba)],this['glyph'],this['color']),this[_0x5d2c08(0xb4)]({'row':_0x3ed945,'col':_0x36fdc8}),_0x2f9ed1[_0x5d2c08(0xcb)](_0x3ed945,_0x36fdc8,this[_0x5d2c08(0x8c)],this[_0x5d2c08(0xc0)]);if(this[_0x5d2c08(0xa6)]>0x0)this['calories']--;else{const _0x1627b8=this[_0x5d2c08(0xa1)]();_0x2f9ed1[_0x5d2c08(0xb2)](_0x1627b8[_0x5d2c08(0x8a)]['row'],_0x1627b8[_0x5d2c08(0x8a)]['col']),this[_0x5d2c08(0x8f)]();}}[a0_0x4e84ff(0xa2)](_0x11c3a5){const _0x25d60a=a0_0x4e84ff;this[_0x25d60a(0xa6)]+=_0x11c3a5;}}class Candy{static[a0_0x4e84ff(0x9c)](){const _0x46c5de=a0_0x4e84ff;this[_0x46c5de(0x91)]=new RandANSI();}constructor(_0x43c461){const _0x12d4b3=a0_0x4e84ff;Object[_0x12d4b3(0xa0)](this,_0x43c461);}static[a0_0x4e84ff(0xa7)](_0x37654a,_0x58a28e,_0x3bd147){const _0x1fcc22=a0_0x4e84ff,{row:_0x5007d1,col:_0x15bbfd}=this['randomPosition'](_0x37654a,_0x58a28e,_0x3bd147),_0x931394=this[_0x1fcc22(0xa4)](),_0x4f8e1a=Candy[_0x1fcc22(0x91)][_0x1fcc22(0x9f)](0x1,0xa),_0x160e07=''+_0x4f8e1a;return new Candy({'row':_0x5007d1,'col':_0x15bbfd,'calories':_0x4f8e1a,'glyph':_0x160e07,'color':_0x931394});}static[a0_0x4e84ff(0xbb)](_0x49b1ef,_0x4b3cc6,_0x338612){const _0x277578=a0_0x4e84ff;let _0x5e1e47,_0xd81d86;do{_0x5e1e47=Candy[_0x277578(0x91)][_0x277578(0x9f)](0x0,_0x4b3cc6),_0xd81d86=Candy['Random'][_0x277578(0x9f)](0x0,_0x338612);}while(_0x49b1ef[_0x277578(0x9e)](_0x5e1e47,_0xd81d86));return{'row':_0x5e1e47,'col':_0xd81d86};}static[a0_0x4e84ff(0xa4)](){const _0x1ee2a9=a0_0x4e84ff,_0x50c6ec=[_0x1ee2a9(0x8b),_0x1ee2a9(0xbd),_0x1ee2a9(0x93),_0x1ee2a9(0xc7),_0x1ee2a9(0x89),'orange','pink'];return _0x50c6ec[Candy[_0x1ee2a9(0x91)][_0x1ee2a9(0x9f)](0x0,_0x50c6ec[_0x1ee2a9(0x8e)])];}[a0_0x4e84ff(0x9b)](_0x5a50ae){const _0x4131e5=a0_0x4e84ff;_0x5a50ae[_0x4131e5(0xcb)](this[_0x4131e5(0x9d)],this['col'],this[_0x4131e5(0xb9)],this[_0x4131e5(0xc0)]);}}class RandANSI{constructor(_0x17fe04=0x1){const _0x481ca1=a0_0x4e84ff;this[_0x481ca1(0xaf)]=_0x17fe04;}[a0_0x4e84ff(0xce)](_0x2bbe78){const _0x50ca55=a0_0x4e84ff;this[_0x50ca55(0xaf)]=_0x2bbe78;}[a0_0x4e84ff(0xbe)](){return(this['seed']=Number((BigInt(this['seed'])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x4e84ff(0x9f)](_0x53ad6f,_0x35a180){const _0x383780=a0_0x4e84ff;return _0x53ad6f+this[_0x383780(0xbe)]()%(_0x35a180-_0x53ad6f);}}
const a0_0x37242a=a0_0x1604;function a0_0x1604(_0x1cad3f,_0x47912b){const _0x305c1d=a0_0x305c();return a0_0x1604=function(_0x1604ac,_0x54df28){_0x1604ac=_0x1604ac-0xe5;let _0x57945c=_0x305c1d[_0x1604ac];return _0x57945c;},a0_0x1604(_0x1cad3f,_0x47912b);}(function(_0x3623e0,_0x749cf8){const _0x3b3c91=a0_0x1604,_0x2a7cb7=_0x3623e0();while(!![]){try{const _0x1419ec=parseInt(_0x3b3c91(0x105))/0x1+parseInt(_0x3b3c91(0xe7))/0x2+-parseInt(_0x3b3c91(0x113))/0x3*(-parseInt(_0x3b3c91(0x110))/0x4)+parseInt(_0x3b3c91(0xfd))/0x5*(-parseInt(_0x3b3c91(0xfe))/0x6)+parseInt(_0x3b3c91(0x116))/0x7+parseInt(_0x3b3c91(0x108))/0x8*(parseInt(_0x3b3c91(0x12b))/0x9)+-parseInt(_0x3b3c91(0xed))/0xa;if(_0x1419ec===_0x749cf8)break;else _0x2a7cb7['push'](_0x2a7cb7['shift']());}catch(_0x42f146){_0x2a7cb7['push'](_0x2a7cb7['shift']());}}}(a0_0x305c,0x233e5));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x185d96=a0_0x1604,_0x1d623f={'canvas':document[_0x185d96(0xfb)]('main-canvas'),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x185d96(0xe5)]=0x64,this[_0x185d96(0x11c)]=new ConsoleGrid(_0x1d623f);const _0x4413cc=document[_0x185d96(0xfb)]('cout-lines');this[_0x185d96(0x10a)]=new Cout(_0x4413cc),this[_0x185d96(0xf0)]=0x0,this['gameOver']=![],this[_0x185d96(0x12a)]=new Snake(),this[_0x185d96(0x12a)][_0x185d96(0x102)](this[_0x185d96(0x11c)]),Candy[_0x185d96(0x10d)](),this[_0x185d96(0x11e)]=Candy[_0x185d96(0x103)](this[_0x185d96(0x12a)],this['grid'][_0x185d96(0x107)],this[_0x185d96(0x11c)]['colCount']),this[_0x185d96(0x11e)][_0x185d96(0xf9)](this[_0x185d96(0x11c)]),this[_0x185d96(0x11c)][_0x185d96(0x117)](this['statusString']());}[a0_0x37242a(0x118)](){const _0x31cdca=a0_0x37242a,_0x3d5315=this[_0x31cdca(0xf0)],_0x2724eb=this[_0x31cdca(0x12a)][_0x31cdca(0x120)]();return _0x3d5315==0x0?0x0:0x1*_0x2724eb*_0x2724eb/_0x3d5315;}[a0_0x37242a(0xe8)](_0x346e6b){const _0x5c6bc2=a0_0x37242a;let _0x49e4e6=_0x5c6bc2(0x11b)+this[_0x5c6bc2(0x12a)][_0x5c6bc2(0x120)]()+_0x5c6bc2(0x112)+this[_0x5c6bc2(0xf0)]+_0x5c6bc2(0x125)+this['metric']()['toFixed'](0x3);if(_0x346e6b)_0x49e4e6+='.\x20'+_0x346e6b;return _0x49e4e6;}[a0_0x37242a(0x101)](_0x104953){const _0x471416=a0_0x37242a;let _0x1010b6='';switch(_0x104953){case _0x471416(0x127):case _0x471416(0xef):case'ArrowUp':case _0x471416(0x10e):this[_0x471416(0x12a)][_0x471416(0xf5)](_0x104953,this['grid'],this['candy'][_0x471416(0x121)],this['candy'][_0x471416(0x11a)]);break;case'Q':case'q':this[_0x471416(0x100)]=!![];default:break;}!this[_0x471416(0x100)]&&(this['snake']['willCrash'](this[_0x471416(0x11c)])?(this['gameOver']=!![],_0x1010b6=_0x471416(0x129)):(this[_0x471416(0x12a)][_0x471416(0x11f)](this[_0x471416(0x11c)]),this['snake']['headIntersects'](this['candy'][_0x471416(0x121)],this[_0x471416(0x11e)][_0x471416(0x11a)])&&(this[_0x471416(0x12a)][_0x471416(0xf3)](this['candy']['calories']),this[_0x471416(0x12a)]['color']=this[_0x471416(0x11e)][_0x471416(0xfa)],this[_0x471416(0x12a)][_0x471416(0x102)](this[_0x471416(0x11c)]),this['candy']=Candy['randomCandy'](this[_0x471416(0x12a)],this['grid']['rowCount'],this[_0x471416(0x11c)]['colCount']),this[_0x471416(0x11e)]['draw'](this['grid']))),this[_0x471416(0xf0)]++,this[_0x471416(0x11c)]['setStatusLine'](this[_0x471416(0xe8)](_0x1010b6))),this[_0x471416(0x11c)][_0x471416(0x117)](this['statusString'](_0x1010b6));}}function a0_0x305c(){const _0xe00154=['.\x20Metric:\x20','calories','ArrowLeft','orange','Ouch,\x20my\x20nose!','snake','9xuTUuX','sleepTimeout','glyph','380076jgifLt','statusString','lime','Random','value','cyan','4613320FXcmAR','assign','ArrowRight','turnCount','pushBack','yellow','eat','randBetween','steer','white','next','pink','draw','color','getElementById','seed','8705ptFZwz','246tzJXuH','tail','gameOver','keydown','drawChars','randomCandy','rand','146045mSXUcT','dRow','rowCount','565016YpHqwb','setSeed','cout','head','pushFront','seedRandom','ArrowDown','headIntersects','5060zWQVVe','eraseCharAt','\x20Turns:\x20','483YxvJKX','randomColor','drawCharAt','466865KLHRlu','setStatusLine','metric','red','col','Length:\x20','grid','intersects','candy','step','length','row','randomPosition','dCol','popBack'];a0_0x305c=function(){return _0xe00154;};return a0_0x305c();}class ListNode{constructor(_0x16ffea,_0x47d822=null){const _0xc3e72=a0_0x37242a;this[_0xc3e72(0xeb)]=_0x16ffea,this[_0xc3e72(0xf7)]=_0x47d822;}}class LinkedList{constructor(){const _0x5ccf33=a0_0x37242a;this[_0x5ccf33(0x10b)]=null;}[a0_0x37242a(0x10c)](_0x418e1c){const _0x2183c9=a0_0x37242a;this[_0x2183c9(0x10b)]=new ListNode(_0x418e1c,this['head']);}['popFront'](){const _0x3c6a7a=a0_0x37242a;this[_0x3c6a7a(0x10b)]&&(this[_0x3c6a7a(0x10b)]=this[_0x3c6a7a(0x10b)][_0x3c6a7a(0xf7)]);}[a0_0x37242a(0xf1)](_0x42c9ea){const _0x4d1552=a0_0x37242a,_0x1346cb=this[_0x4d1552(0xff)](),_0x2e89d0=new ListNode(_0x42c9ea);_0x1346cb?_0x1346cb[_0x4d1552(0xf7)]=_0x2e89d0:this['head']=_0x2e89d0;}[a0_0x37242a(0x124)](){const _0x181bbe=a0_0x37242a,_0x1c9e73=this[_0x181bbe(0xff)]();if(_0x1c9e73){if(this[_0x181bbe(0x10b)]==_0x1c9e73)this[_0x181bbe(0x10b)]=null;else{let _0x1b0169=this['head'];while(_0x1b0169['next']!=_0x1c9e73)_0x1b0169=_0x1b0169[_0x181bbe(0xf7)];_0x1b0169['next']=null;}}}[a0_0x37242a(0xff)](){const _0x4dc596=a0_0x37242a;let _0x48123=null;for(let _0x53020b=this[_0x4dc596(0x10b)];_0x53020b;_0x53020b=_0x53020b[_0x4dc596(0xf7)]){_0x48123=_0x53020b;}return _0x48123;}['length'](){const _0x90ef18=a0_0x37242a;let _0xdd0859=0x0;for(let _0x54ec7b=this[_0x90ef18(0x10b)];_0x54ec7b;_0x54ec7b=_0x54ec7b['next']){_0xdd0859++;}return _0xdd0859;}}class Snake extends LinkedList{constructor(){const _0x22f3f9=a0_0x37242a;super(),this['calories']=0x0,this[_0x22f3f9(0xfa)]=_0x22f3f9(0xf6),this[_0x22f3f9(0xe6)]='o',this['headGlyph']='@',this[_0x22f3f9(0x106)]=0x0,this[_0x22f3f9(0x123)]=0x1,this[_0x22f3f9(0xf1)]({'row':0x5,'col':0x5}),this['pushBack']({'row':0x5,'col':0x4}),this[_0x22f3f9(0xf1)]({'row':0x5,'col':0x3});}['willCrash'](_0x4584c4){const _0x5eab01=a0_0x37242a,_0x444c47=this['head'][_0x5eab01(0xeb)][_0x5eab01(0x121)]+this[_0x5eab01(0x106)],_0x4ccec1=this[_0x5eab01(0x10b)]['value'][_0x5eab01(0x11a)]+this[_0x5eab01(0x123)],_0x2fa3b9=_0x444c47>=0x0&&_0x444c47<_0x4584c4[_0x5eab01(0x107)]&&_0x4ccec1>=0x0&&_0x4ccec1<_0x4584c4['colCount'];return!_0x2fa3b9||this[_0x5eab01(0x11d)](_0x444c47,_0x4ccec1);}[a0_0x37242a(0x10f)](_0x4cdf80,_0x32f0bd){const _0x503976=a0_0x37242a;return this[_0x503976(0x10b)]['value']['row']==_0x4cdf80&&this[_0x503976(0x10b)][_0x503976(0xeb)][_0x503976(0x11a)]==_0x32f0bd;}['intersects'](_0x532c3f,_0x4f22be){const _0x3a34ec=a0_0x37242a;let _0x242f8b=![],_0xeb559d=this[_0x3a34ec(0x10b)];while(_0xeb559d){if(_0xeb559d[_0x3a34ec(0xeb)][_0x3a34ec(0x121)]==_0x532c3f&&_0xeb559d[_0x3a34ec(0xeb)][_0x3a34ec(0x11a)]==_0x4f22be){_0x242f8b=!![];break;}_0xeb559d=_0xeb559d['next'];}return _0x242f8b;}[a0_0x37242a(0x102)](_0x119b09){const _0x2cd0db=a0_0x37242a;let _0x36f090=this['headGlyph'];for(let _0x2793e5=this[_0x2cd0db(0x10b)];_0x2793e5;_0x2793e5=_0x2793e5['next']){_0x119b09[_0x2cd0db(0x115)](_0x2793e5[_0x2cd0db(0xeb)][_0x2cd0db(0x121)],_0x2793e5['value'][_0x2cd0db(0x11a)],_0x36f090,this['color']),_0x36f090=this['glyph'];}}['steer'](_0x4656bb,_0x5d8d34,_0x139aae,_0x386af2){const _0x5f4860=a0_0x37242a;this[_0x5f4860(0x106)]=0x0,this[_0x5f4860(0x123)]=0x0;switch(_0x4656bb){case _0x5f4860(0x127):this[_0x5f4860(0x123)]=-0x1;break;case _0x5f4860(0xef):this[_0x5f4860(0x123)]=0x1;break;case'ArrowUp':this[_0x5f4860(0x106)]=-0x1;break;case _0x5f4860(0x10e):this[_0x5f4860(0x106)]=0x1;break;default:break;}}[a0_0x37242a(0x11f)](_0x5be188){const _0x119f4b=a0_0x37242a;let _0x5cf14c=this[_0x119f4b(0x10b)][_0x119f4b(0xeb)][_0x119f4b(0x121)]+this['dRow'],_0x47d454=this[_0x119f4b(0x10b)][_0x119f4b(0xeb)][_0x119f4b(0x11a)]+this['dCol'];_0x5be188['drawCharAt'](this[_0x119f4b(0x10b)][_0x119f4b(0xeb)][_0x119f4b(0x121)],this[_0x119f4b(0x10b)][_0x119f4b(0xeb)]['col'],this['glyph'],this['color']),this[_0x119f4b(0x10c)]({'row':_0x5cf14c,'col':_0x47d454}),_0x5be188[_0x119f4b(0x115)](_0x5cf14c,_0x47d454,this['headGlyph'],this[_0x119f4b(0xfa)]);if(this[_0x119f4b(0x126)]>0x0)this[_0x119f4b(0x126)]--;else{const _0x2aab0b=this[_0x119f4b(0xff)]();_0x5be188[_0x119f4b(0x111)](_0x2aab0b[_0x119f4b(0xeb)][_0x119f4b(0x121)],_0x2aab0b[_0x119f4b(0xeb)][_0x119f4b(0x11a)]),this[_0x119f4b(0x124)]();}}[a0_0x37242a(0xf3)](_0x5a4497){const _0x3e2f8c=a0_0x37242a;this[_0x3e2f8c(0x126)]+=_0x5a4497;}}class Candy{static[a0_0x37242a(0x10d)](){const _0x226524=a0_0x37242a;this[_0x226524(0xea)]=new RandANSI();}constructor(_0x56bccb){const _0x306129=a0_0x37242a;Object[_0x306129(0xee)](this,_0x56bccb);}static['randomCandy'](_0x1917dc,_0x38a11,_0x6746ac){const _0x4d0d20=a0_0x37242a,{row:_0x2e378b,col:_0x3dd1eb}=this[_0x4d0d20(0x122)](_0x1917dc,_0x38a11,_0x6746ac),_0x3a5004=this[_0x4d0d20(0x114)](),_0x24f46f=Candy['Random']['randBetween'](0x1,0xa),_0x1503a8=''+_0x24f46f;return new Candy({'row':_0x2e378b,'col':_0x3dd1eb,'calories':_0x24f46f,'glyph':_0x1503a8,'color':_0x3a5004});}static['randomPosition'](_0x239660,_0x402c67,_0xee43af){const _0x3884c8=a0_0x37242a;let _0x5ba5de,_0x1a17e1;do{_0x5ba5de=Candy[_0x3884c8(0xea)][_0x3884c8(0xf4)](0x0,_0x402c67),_0x1a17e1=Candy[_0x3884c8(0xea)][_0x3884c8(0xf4)](0x0,_0xee43af);}while(_0x239660[_0x3884c8(0x11d)](_0x5ba5de,_0x1a17e1));return{'row':_0x5ba5de,'col':_0x1a17e1};}static[a0_0x37242a(0x114)](){const _0x43c157=a0_0x37242a,_0x4229e1=[_0x43c157(0x119),_0x43c157(0xe9),_0x43c157(0xf2),_0x43c157(0xec),'magenta',_0x43c157(0x128),_0x43c157(0xf8)];return _0x4229e1[Candy[_0x43c157(0xea)][_0x43c157(0xf4)](0x0,_0x4229e1[_0x43c157(0x120)])];}[a0_0x37242a(0xf9)](_0x543365){const _0x5c0773=a0_0x37242a;_0x543365[_0x5c0773(0x115)](this[_0x5c0773(0x121)],this[_0x5c0773(0x11a)],this[_0x5c0773(0xe6)],this[_0x5c0773(0xfa)]);}}class RandANSI{constructor(_0x2fab55=0x1){const _0x341ff6=a0_0x37242a;this[_0x341ff6(0xfc)]=_0x2fab55;}[a0_0x37242a(0x109)](_0xa9e295){const _0x38856a=a0_0x37242a;this[_0x38856a(0xfc)]=_0xa9e295;}[a0_0x37242a(0x104)](){const _0x137d6e=a0_0x37242a;return(this[_0x137d6e(0xfc)]=Number((BigInt(this[_0x137d6e(0xfc)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x37242a(0xf4)](_0x2dff12,_0x1ff09c){return _0x2dff12+this['rand']()%(_0x1ff09c-_0x2dff12);}}
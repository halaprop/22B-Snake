function a0_0x3c97(_0x131d66,_0x12c472){const _0x233b1e=a0_0x233b();return a0_0x3c97=function(_0x3c97de,_0x133aae){_0x3c97de=_0x3c97de-0xa6;let _0x378522=_0x233b1e[_0x3c97de];return _0x378522;},a0_0x3c97(_0x131d66,_0x12c472);}const a0_0x2fc6dd=a0_0x3c97;(function(_0x228971,_0x3b17b8){const _0x2c002d=a0_0x3c97,_0x35618d=_0x228971();while(!![]){try{const _0x3ba4f7=-parseInt(_0x2c002d(0xdd))/0x1+-parseInt(_0x2c002d(0xbb))/0x2*(-parseInt(_0x2c002d(0xd6))/0x3)+-parseInt(_0x2c002d(0xd4))/0x4*(-parseInt(_0x2c002d(0xcd))/0x5)+parseInt(_0x2c002d(0xaf))/0x6+-parseInt(_0x2c002d(0xb3))/0x7+-parseInt(_0x2c002d(0xdb))/0x8*(parseInt(_0x2c002d(0xab))/0x9)+parseInt(_0x2c002d(0xdc))/0xa;if(_0x3ba4f7===_0x3b17b8)break;else _0x35618d['push'](_0x35618d['shift']());}catch(_0x4543a3){_0x35618d['push'](_0x35618d['shift']());}}}(a0_0x233b,0x23330));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x4a1f15=a0_0x3c97,_0x1b7be2={'canvas':document[_0x4a1f15(0xeb)](_0x4a1f15(0xc3)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this['grid']=new ConsoleGrid(_0x1b7be2);const _0x3c150f=document[_0x4a1f15(0xeb)](_0x4a1f15(0xe2));this[_0x4a1f15(0xb1)]=new Cout(_0x3c150f),this[_0x4a1f15(0xe1)]=0x0,this[_0x4a1f15(0xbe)]=![],this[_0x4a1f15(0xa8)]=new Snake(),this['snake'][_0x4a1f15(0xe0)](this['grid']),this[_0x4a1f15(0xbc)]=Candy[_0x4a1f15(0xb8)](this[_0x4a1f15(0xa8)],this[_0x4a1f15(0xc1)][_0x4a1f15(0xcb)],this[_0x4a1f15(0xc1)]['colCount']),this[_0x4a1f15(0xbc)][_0x4a1f15(0xec)](this['grid']),this[_0x4a1f15(0xc1)][_0x4a1f15(0xa6)](this[_0x4a1f15(0xe4)]());}[a0_0x2fc6dd(0xe9)](){const _0xd76a24=a0_0x2fc6dd,_0x665b46=this[_0xd76a24(0xe1)],_0x4dd517=this[_0xd76a24(0xa8)][_0xd76a24(0xa9)]();return _0x665b46==0x0?0x0:0x1*_0x4dd517*_0x4dd517/_0x665b46;}[a0_0x2fc6dd(0xe4)](_0x2095d0){const _0x220812=a0_0x2fc6dd;let _0x38ce2a=_0x220812(0xd8)+this[_0x220812(0xa8)][_0x220812(0xa9)]()+'\x20Turns:\x20'+this[_0x220812(0xe1)]+_0x220812(0xb6)+this[_0x220812(0xe9)]()[_0x220812(0xc9)](0x3);if(_0x2095d0)_0x38ce2a+='.\x20'+_0x2095d0;return _0x38ce2a;}[a0_0x2fc6dd(0xc0)](_0x49d941){const _0x580833=a0_0x2fc6dd;let _0x544e99='';switch(_0x49d941){case _0x580833(0xd2):case _0x580833(0xd9):case _0x580833(0xe8):case _0x580833(0xd7):this['snake']['steer'](_0x49d941,this[_0x580833(0xc1)],this[_0x580833(0xbc)]['row'],this[_0x580833(0xbc)][_0x580833(0xaa)]);break;case'Q':case'q':this[_0x580833(0xbe)]=!![];default:break;}!this[_0x580833(0xbe)]&&(this['snake']['willCrash'](this[_0x580833(0xc1)])?(this['gameOver']=!![],_0x544e99=_0x580833(0xb0)):(this[_0x580833(0xa8)][_0x580833(0xb7)](this['grid']),this['snake'][_0x580833(0xbd)](this['candy'][_0x580833(0xba)],this[_0x580833(0xbc)][_0x580833(0xaa)])&&(this[_0x580833(0xa8)][_0x580833(0xae)](this[_0x580833(0xbc)]['calories']),this[_0x580833(0xa8)][_0x580833(0xb5)]=this['candy'][_0x580833(0xb5)],this[_0x580833(0xa8)][_0x580833(0xe0)](this[_0x580833(0xc1)]),this[_0x580833(0xbc)]=Candy[_0x580833(0xb8)](this[_0x580833(0xa8)],this['grid'][_0x580833(0xcb)],this[_0x580833(0xc1)][_0x580833(0xbf)]),this[_0x580833(0xbc)][_0x580833(0xec)](this[_0x580833(0xc1)]))),this[_0x580833(0xe1)]++,this[_0x580833(0xc1)][_0x580833(0xa6)](this[_0x580833(0xe4)](_0x544e99))),this[_0x580833(0xc1)][_0x580833(0xa6)](this['statusString'](_0x544e99));}}class ListNode{constructor(_0x4a0e5f,_0x403bce=null){const _0x2fe8ed=a0_0x2fc6dd;this['value']=_0x4a0e5f,this[_0x2fe8ed(0xda)]=_0x403bce;}}class LinkedList{constructor(){this['head']=null;}['pushFront'](_0x3469d0){const _0x3b2295=a0_0x2fc6dd;this[_0x3b2295(0xac)]=new ListNode(_0x3469d0,this['head']);}['popFront'](){const _0x3b18d2=a0_0x2fc6dd;this[_0x3b18d2(0xac)]&&(this[_0x3b18d2(0xac)]=this[_0x3b18d2(0xac)][_0x3b18d2(0xda)]);}[a0_0x2fc6dd(0xca)](_0xa802b7){const _0x4b048c=a0_0x2fc6dd,_0x308f54=this[_0x4b048c(0xed)](),_0x2b35ba=new ListNode(_0xa802b7);_0x308f54?_0x308f54[_0x4b048c(0xda)]=_0x2b35ba:this[_0x4b048c(0xac)]=_0x2b35ba;}[a0_0x2fc6dd(0xc4)](){const _0x5daf5d=a0_0x2fc6dd,_0x4f3174=this[_0x5daf5d(0xed)]();if(_0x4f3174){if(this[_0x5daf5d(0xac)]==_0x4f3174)this[_0x5daf5d(0xac)]=null;else{let _0x290085=this['head'];while(_0x290085[_0x5daf5d(0xda)]!=_0x4f3174)_0x290085=_0x290085[_0x5daf5d(0xda)];_0x290085[_0x5daf5d(0xda)]=null;}}}[a0_0x2fc6dd(0xed)](){const _0x3b1f91=a0_0x2fc6dd;let _0x1aa739=null;for(let _0x12ba99=this[_0x3b1f91(0xac)];_0x12ba99;_0x12ba99=_0x12ba99[_0x3b1f91(0xda)]){_0x1aa739=_0x12ba99;}return _0x1aa739;}[a0_0x2fc6dd(0xa9)](){let _0x26c697=0x0;for(let _0x4c924e=this['head'];_0x4c924e;_0x4c924e=_0x4c924e['next']){_0x26c697++;}return _0x26c697;}}class Snake extends LinkedList{constructor(){const _0x188a75=a0_0x2fc6dd;super(),this[_0x188a75(0xe6)]=0x0,this[_0x188a75(0xb5)]=_0x188a75(0xc5),this[_0x188a75(0xd0)]='o',this[_0x188a75(0xad)]='@',this[_0x188a75(0xcf)]=0x0,this[_0x188a75(0xdf)]=0x1,this[_0x188a75(0xca)]({'row':0x5,'col':0x5}),this[_0x188a75(0xca)]({'row':0x5,'col':0x4}),this['pushBack']({'row':0x5,'col':0x3});}[a0_0x2fc6dd(0xde)](_0x404161){const _0x217e14=a0_0x2fc6dd,_0x24f6df=this[_0x217e14(0xac)][_0x217e14(0xd1)]['row']+this[_0x217e14(0xcf)],_0x365e76=this[_0x217e14(0xac)][_0x217e14(0xd1)][_0x217e14(0xaa)]+this[_0x217e14(0xdf)],_0x1e793c=_0x24f6df>=0x0&&_0x24f6df<_0x404161['rowCount']&&_0x365e76>=0x0&&_0x365e76<_0x404161[_0x217e14(0xbf)];return!_0x1e793c||this[_0x217e14(0xc8)](_0x24f6df,_0x365e76);}['headIntersects'](_0x559274,_0x176f73){const _0xce4fe9=a0_0x2fc6dd;return this[_0xce4fe9(0xac)][_0xce4fe9(0xd1)][_0xce4fe9(0xba)]==_0x559274&&this[_0xce4fe9(0xac)]['value'][_0xce4fe9(0xaa)]==_0x176f73;}[a0_0x2fc6dd(0xc8)](_0x56c553,_0x498144){const _0x1d1c74=a0_0x2fc6dd;let _0x5c6743=![],_0x137bcb=this[_0x1d1c74(0xac)];while(_0x137bcb){if(_0x137bcb[_0x1d1c74(0xd1)]['row']==_0x56c553&&_0x137bcb[_0x1d1c74(0xd1)][_0x1d1c74(0xaa)]==_0x498144){_0x5c6743=!![];break;}_0x137bcb=_0x137bcb[_0x1d1c74(0xda)];}return _0x5c6743;}[a0_0x2fc6dd(0xe0)](_0x18669f){const _0x216db5=a0_0x2fc6dd;let _0x540379=this[_0x216db5(0xad)];for(let _0x24d4b0=this[_0x216db5(0xac)];_0x24d4b0;_0x24d4b0=_0x24d4b0[_0x216db5(0xda)]){_0x18669f[_0x216db5(0xd5)](_0x24d4b0[_0x216db5(0xd1)][_0x216db5(0xba)],_0x24d4b0['value'][_0x216db5(0xaa)],_0x540379,this[_0x216db5(0xb5)]),_0x540379=this[_0x216db5(0xd0)];}}[a0_0x2fc6dd(0xb4)](_0x100633,_0x498d78,_0x871fe4,_0x54ec42){const _0x1b9cd9=a0_0x2fc6dd;this[_0x1b9cd9(0xcf)]=0x0,this[_0x1b9cd9(0xdf)]=0x0;switch(_0x100633){case _0x1b9cd9(0xd2):this['dCol']=-0x1;break;case'ArrowRight':this[_0x1b9cd9(0xdf)]=0x1;break;case _0x1b9cd9(0xe8):this[_0x1b9cd9(0xcf)]=-0x1;break;case _0x1b9cd9(0xd7):this[_0x1b9cd9(0xcf)]=0x1;break;default:break;}}['step'](_0x3c9a85){const _0x29eb6e=a0_0x2fc6dd;let _0x4a71a2=this[_0x29eb6e(0xac)][_0x29eb6e(0xd1)]['row']+this[_0x29eb6e(0xcf)],_0x2bd29a=this[_0x29eb6e(0xac)]['value'][_0x29eb6e(0xaa)]+this[_0x29eb6e(0xdf)];_0x3c9a85['drawCharAt'](this['head'][_0x29eb6e(0xd1)]['row'],this[_0x29eb6e(0xac)][_0x29eb6e(0xd1)][_0x29eb6e(0xaa)],this[_0x29eb6e(0xd0)],this[_0x29eb6e(0xb5)]),this[_0x29eb6e(0xcc)]({'row':_0x4a71a2,'col':_0x2bd29a}),_0x3c9a85[_0x29eb6e(0xd5)](_0x4a71a2,_0x2bd29a,this[_0x29eb6e(0xad)],this['color']);if(this['calories']>0x0)this[_0x29eb6e(0xe6)]--;else{const _0x162961=this[_0x29eb6e(0xed)]();_0x3c9a85['eraseCharAt'](_0x162961[_0x29eb6e(0xd1)][_0x29eb6e(0xba)],_0x162961['value'][_0x29eb6e(0xaa)]),this[_0x29eb6e(0xc4)]();}}[a0_0x2fc6dd(0xae)](_0x56ad01){this['calories']+=_0x56ad01;}}class Candy{constructor(_0x351669){const _0x19c524=a0_0x2fc6dd;Object[_0x19c524(0xce)](this,_0x351669);}static[a0_0x2fc6dd(0xb8)](_0x196946,_0x3751f7,_0x1f5ab1){const _0x49bf8f=a0_0x2fc6dd,{row:_0x363e26,col:_0x51cac3}=this[_0x49bf8f(0xe7)](_0x196946,_0x3751f7,_0x1f5ab1),_0x46b808=this[_0x49bf8f(0xe3)](),_0x416c33=Random[_0x49bf8f(0xea)](0x1,0xa),_0x488fa2=''+_0x416c33;return new Candy({'row':_0x363e26,'col':_0x51cac3,'calories':_0x416c33,'glyph':_0x488fa2,'color':_0x46b808});}static[a0_0x2fc6dd(0xe7)](_0x2f6b13,_0x57143b,_0x55a5bd){const _0x1c09b4=a0_0x2fc6dd;let _0x18aff1,_0x2df09c;do{_0x18aff1=Random[_0x1c09b4(0xea)](0x0,_0x57143b),_0x2df09c=Random[_0x1c09b4(0xea)](0x0,_0x55a5bd);}while(_0x2f6b13['intersects'](_0x18aff1,_0x2df09c));return{'row':_0x18aff1,'col':_0x2df09c};}static[a0_0x2fc6dd(0xe3)](){const _0x3c8315=a0_0x2fc6dd,_0x59b21b=[_0x3c8315(0xa7),_0x3c8315(0xc6),_0x3c8315(0xb2),_0x3c8315(0xd3),'magenta',_0x3c8315(0xc2),_0x3c8315(0xe5)];return _0x59b21b[Random[_0x3c8315(0xea)](0x0,_0x59b21b[_0x3c8315(0xa9)])];}[a0_0x2fc6dd(0xec)](_0x6995b5){const _0x40efdc=a0_0x2fc6dd;_0x6995b5['drawCharAt'](this['row'],this['col'],this[_0x40efdc(0xd0)],this[_0x40efdc(0xb5)]);}}function a0_0x233b(){const _0x175a49=['calories','randomPosition','ArrowUp','metric','randBetween','getElementById','draw','tail','setStatusLine','red','snake','length','col','99JnFxOi','head','headGlyph','eat','1486428DqoSYM','Ouch,\x20my\x20nose!','cout','yellow','863709bXshBK','steer','color','.\x20Metric:\x20','step','randomCandy','seed','row','62CxmcmW','candy','headIntersects','gameOver','colCount','keydown','grid','orange','main-canvas','popBack','white','lime','rand','intersects','toFixed','pushBack','rowCount','pushFront','385YMHjpP','assign','dRow','glyph','value','ArrowLeft','cyan','2152sdLyGr','drawCharAt','1731WBhWlq','ArrowDown','Length:\x20','ArrowRight','next','76648uWiJyq','1962610YKPhCf','130358dllLuQ','willCrash','dCol','drawChars','turnCount','cout-lines','randomColor','statusString','pink'];a0_0x233b=function(){return _0x175a49;};return a0_0x233b();}class RandANSI{constructor(_0x3b28f3=0x1){this['seed']=_0x3b28f3;}['setSeed'](_0x50f96b){const _0x525d85=a0_0x2fc6dd;this[_0x525d85(0xb9)]=_0x50f96b;}[a0_0x2fc6dd(0xc7)](){const _0x2fd511=a0_0x2fc6dd;return(this[_0x2fd511(0xb9)]=Number((BigInt(this['seed'])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x2fc6dd(0xea)](_0x1f5a81,_0x5874a1){const _0x34a2b4=a0_0x2fc6dd;return _0x1f5a81+this[_0x34a2b4(0xc7)]()%(_0x5874a1-_0x1f5a81);}}const Random=new RandANSI();
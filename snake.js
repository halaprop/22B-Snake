const a0_0x4431c7=a0_0x12df;(function(_0x44c581,_0x361203){const _0xe66803=a0_0x12df,_0x5bffff=_0x44c581();while(!![]){try{const _0x2c93c6=parseInt(_0xe66803(0x1ed))/0x1*(parseInt(_0xe66803(0x1f2))/0x2)+parseInt(_0xe66803(0x20a))/0x3+-parseInt(_0xe66803(0x204))/0x4+-parseInt(_0xe66803(0x221))/0x5*(-parseInt(_0xe66803(0x1ea))/0x6)+parseInt(_0xe66803(0x207))/0x7+parseInt(_0xe66803(0x21e))/0x8+-parseInt(_0xe66803(0x1fc))/0x9;if(_0x2c93c6===_0x361203)break;else _0x5bffff['push'](_0x5bffff['shift']());}catch(_0x2ae304){_0x5bffff['push'](_0x5bffff['shift']());}}}(a0_0x3698,0x8655c));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x57696d=a0_0x12df,_0x2d8de1={'canvas':document[_0x57696d(0x210)]('main-canvas'),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x57696d(0x1e4)]=0x64,this[_0x57696d(0x1fd)]=new ConsoleGrid(_0x2d8de1);const _0x42572d=document[_0x57696d(0x210)]('cout-lines');this['cout']=new Cout(_0x42572d),this[_0x57696d(0x1e8)]=0x0,this[_0x57696d(0x1eb)]=![],this[_0x57696d(0x21b)]=new Snake(),this[_0x57696d(0x21b)][_0x57696d(0x218)](this[_0x57696d(0x1fd)]),this[_0x57696d(0x1ec)]=Candy['randomCandy'](this[_0x57696d(0x21b)],this['grid'][_0x57696d(0x21d)],this['grid'][_0x57696d(0x219)]),this[_0x57696d(0x1ec)][_0x57696d(0x206)](this[_0x57696d(0x1fd)]),this[_0x57696d(0x1fd)]['setStatusLine'](this[_0x57696d(0x1f3)]());}['metric'](){const _0x30d5bd=a0_0x12df,_0x5abc69=this['turnCount'],_0x4441d=this[_0x30d5bd(0x21b)]['length']();return _0x5abc69==0x0?0x0:0x1*_0x4441d*_0x4441d/_0x5abc69;}[a0_0x4431c7(0x1f3)](_0x835b95){const _0xdc214f=a0_0x4431c7;let _0x128c94=_0xdc214f(0x1ef)+this[_0xdc214f(0x21b)][_0xdc214f(0x1e7)]()+_0xdc214f(0x21f)+this['turnCount']+_0xdc214f(0x212)+this['metric']()[_0xdc214f(0x200)](0x3);if(_0x835b95)_0x128c94+='.\x20'+_0x835b95;return _0x128c94;}[a0_0x4431c7(0x1fa)](_0x25457d){const _0x34dad5=a0_0x4431c7;let _0x35b7f8='';switch(_0x25457d){case _0x34dad5(0x21a):case _0x34dad5(0x1f6):case _0x34dad5(0x1df):case _0x34dad5(0x1e5):this[_0x34dad5(0x21b)][_0x34dad5(0x215)](_0x25457d,this[_0x34dad5(0x1fd)],this[_0x34dad5(0x1ec)][_0x34dad5(0x1f0)],this['candy'][_0x34dad5(0x20c)]);break;case'Q':case'q':this[_0x34dad5(0x1eb)]=!![];default:break;}!this[_0x34dad5(0x1eb)]&&(this[_0x34dad5(0x21b)][_0x34dad5(0x1f7)](this['grid'])?(this['gameOver']=!![],_0x35b7f8=_0x34dad5(0x21c)):(this[_0x34dad5(0x21b)]['step'](this[_0x34dad5(0x1fd)]),this[_0x34dad5(0x21b)][_0x34dad5(0x201)](this[_0x34dad5(0x1ec)][_0x34dad5(0x1f0)],this['candy'][_0x34dad5(0x20c)])&&(this[_0x34dad5(0x21b)][_0x34dad5(0x1e1)](this['candy']['calories']),this['snake'][_0x34dad5(0x1f9)]=this[_0x34dad5(0x1ec)][_0x34dad5(0x1f9)],this[_0x34dad5(0x21b)][_0x34dad5(0x218)](this[_0x34dad5(0x1fd)]),this[_0x34dad5(0x1ec)]=Candy[_0x34dad5(0x209)](this[_0x34dad5(0x21b)],this['grid'][_0x34dad5(0x21d)],this[_0x34dad5(0x1fd)]['colCount']),this[_0x34dad5(0x1ec)]['draw'](this['grid']))),this[_0x34dad5(0x1e8)]++,this[_0x34dad5(0x1fd)]['setStatusLine'](this['statusString'](_0x35b7f8))),this[_0x34dad5(0x1fd)][_0x34dad5(0x1e9)](this['statusString'](_0x35b7f8));}}function a0_0x12df(_0x5680c8,_0x1aad18){const _0x36989d=a0_0x3698();return a0_0x12df=function(_0x12df7d,_0x57c558){_0x12df7d=_0x12df7d-0x1df;let _0x402395=_0x36989d[_0x12df7d];return _0x402395;},a0_0x12df(_0x5680c8,_0x1aad18);}class ListNode{constructor(_0x177672,_0x16fd70=null){const _0x425329=a0_0x4431c7;this[_0x425329(0x1f5)]=_0x177672,this['next']=_0x16fd70;}}class LinkedList{constructor(){const _0xecee3e=a0_0x4431c7;this[_0xecee3e(0x213)]=null;}[a0_0x4431c7(0x205)](_0x1ca352){const _0x6e15b9=a0_0x4431c7;this['head']=new ListNode(_0x1ca352,this[_0x6e15b9(0x213)]);}['popFront'](){const _0x41a283=a0_0x4431c7;this[_0x41a283(0x213)]&&(this[_0x41a283(0x213)]=this['head'][_0x41a283(0x1f1)]);}[a0_0x4431c7(0x1e3)](_0x4fbc5e){const _0x1c7daa=a0_0x4431c7,_0x5223f8=this[_0x1c7daa(0x214)](),_0x37b9aa=new ListNode(_0x4fbc5e);_0x5223f8?_0x5223f8[_0x1c7daa(0x1f1)]=_0x37b9aa:this[_0x1c7daa(0x213)]=_0x37b9aa;}[a0_0x4431c7(0x1f8)](){const _0x4a05b0=a0_0x4431c7,_0x8ff6dc=this[_0x4a05b0(0x214)]();if(_0x8ff6dc){if(this[_0x4a05b0(0x213)]==_0x8ff6dc)this[_0x4a05b0(0x213)]=null;else{let _0xd4cfbc=this[_0x4a05b0(0x213)];while(_0xd4cfbc[_0x4a05b0(0x1f1)]!=_0x8ff6dc)_0xd4cfbc=_0xd4cfbc['next'];_0xd4cfbc['next']=null;}}}[a0_0x4431c7(0x214)](){const _0x2794c0=a0_0x4431c7;let _0x49d075=null;for(let _0x5c9f15=this[_0x2794c0(0x213)];_0x5c9f15;_0x5c9f15=_0x5c9f15[_0x2794c0(0x1f1)]){_0x49d075=_0x5c9f15;}return _0x49d075;}[a0_0x4431c7(0x1e7)](){const _0x3f844e=a0_0x4431c7;let _0x1afe6b=0x0;for(let _0x15916a=this[_0x3f844e(0x213)];_0x15916a;_0x15916a=_0x15916a[_0x3f844e(0x1f1)]){_0x1afe6b++;}return _0x1afe6b;}}class Snake extends LinkedList{constructor(){const _0x1e6b65=a0_0x4431c7;super(),this[_0x1e6b65(0x1fb)]=0x0,this['color']='white',this[_0x1e6b65(0x20e)]='o',this['headGlyph']='@',this[_0x1e6b65(0x220)]=0x0,this[_0x1e6b65(0x1e0)]=0x1,this[_0x1e6b65(0x1e3)]({'row':0x5,'col':0x5}),this[_0x1e6b65(0x1e3)]({'row':0x5,'col':0x4}),this[_0x1e6b65(0x1e3)]({'row':0x5,'col':0x3});}[a0_0x4431c7(0x1f7)](_0x427769){const _0x5b5cbd=a0_0x4431c7,_0x558cb9=this['head'][_0x5b5cbd(0x1f5)][_0x5b5cbd(0x1f0)]+this[_0x5b5cbd(0x220)],_0x5b0379=this[_0x5b5cbd(0x213)][_0x5b5cbd(0x1f5)]['col']+this[_0x5b5cbd(0x1e0)],_0xda45f5=_0x558cb9>=0x0&&_0x558cb9<_0x427769[_0x5b5cbd(0x21d)]&&_0x5b0379>=0x0&&_0x5b0379<_0x427769[_0x5b5cbd(0x219)];return!_0xda45f5||this['intersects'](_0x558cb9,_0x5b0379);}['headIntersects'](_0x551110,_0x4f6f0b){const _0x2febdb=a0_0x4431c7;return this['head']['value']['row']==_0x551110&&this[_0x2febdb(0x213)][_0x2febdb(0x1f5)][_0x2febdb(0x20c)]==_0x4f6f0b;}['intersects'](_0x4e7049,_0x1109ea){const _0xb50517=a0_0x4431c7;let _0x1acd16=![],_0x279521=this[_0xb50517(0x213)];while(_0x279521){if(_0x279521[_0xb50517(0x1f5)][_0xb50517(0x1f0)]==_0x4e7049&&_0x279521[_0xb50517(0x1f5)][_0xb50517(0x20c)]==_0x1109ea){_0x1acd16=!![];break;}_0x279521=_0x279521[_0xb50517(0x1f1)];}return _0x1acd16;}[a0_0x4431c7(0x218)](_0x4417e7){const _0x472824=a0_0x4431c7;let _0x1fd77f=this[_0x472824(0x202)];for(let _0x51a4a3=this[_0x472824(0x213)];_0x51a4a3;_0x51a4a3=_0x51a4a3['next']){_0x4417e7['drawCharAt'](_0x51a4a3[_0x472824(0x1f5)][_0x472824(0x1f0)],_0x51a4a3[_0x472824(0x1f5)][_0x472824(0x20c)],_0x1fd77f,this['color']),_0x1fd77f=this['glyph'];}}[a0_0x4431c7(0x215)](_0x2a6f95,_0x52f404,_0x4f12bb,_0x365fbe){const _0x23ea11=a0_0x4431c7;this['dRow']=0x0,this[_0x23ea11(0x1e0)]=0x0;switch(_0x2a6f95){case _0x23ea11(0x21a):this[_0x23ea11(0x1e0)]=-0x1;break;case _0x23ea11(0x1f6):this[_0x23ea11(0x1e0)]=0x1;break;case _0x23ea11(0x1df):this[_0x23ea11(0x220)]=-0x1;break;case _0x23ea11(0x1e5):this[_0x23ea11(0x220)]=0x1;break;default:break;}}[a0_0x4431c7(0x20d)](_0x525c57){const _0x5652ab=a0_0x4431c7;let _0x2e8765=this[_0x5652ab(0x213)][_0x5652ab(0x1f5)][_0x5652ab(0x1f0)]+this['dRow'],_0x323fec=this[_0x5652ab(0x213)][_0x5652ab(0x1f5)][_0x5652ab(0x20c)]+this[_0x5652ab(0x1e0)];_0x525c57[_0x5652ab(0x1ee)](this[_0x5652ab(0x213)][_0x5652ab(0x1f5)][_0x5652ab(0x1f0)],this[_0x5652ab(0x213)][_0x5652ab(0x1f5)][_0x5652ab(0x20c)],this[_0x5652ab(0x20e)],this[_0x5652ab(0x1f9)]),this['pushFront']({'row':_0x2e8765,'col':_0x323fec}),_0x525c57[_0x5652ab(0x1ee)](_0x2e8765,_0x323fec,this[_0x5652ab(0x202)],this[_0x5652ab(0x1f9)]);if(this['calories']>0x0)this[_0x5652ab(0x1fb)]--;else{const _0x13a551=this[_0x5652ab(0x214)]();_0x525c57[_0x5652ab(0x20f)](_0x13a551[_0x5652ab(0x1f5)]['row'],_0x13a551[_0x5652ab(0x1f5)]['col']),this[_0x5652ab(0x1f8)]();}}['eat'](_0x3d77f5){const _0x3669c7=a0_0x4431c7;this[_0x3669c7(0x1fb)]+=_0x3d77f5;}}class Candy{constructor(_0x48146b){const _0x363fc5=a0_0x4431c7;Object[_0x363fc5(0x217)](this,_0x48146b);}static[a0_0x4431c7(0x209)](_0x235228,_0x28acb8,_0x4bea39){const _0x386ae0=a0_0x4431c7,{row:_0x5c48be,col:_0x5243e3}=this[_0x386ae0(0x1ff)](_0x235228,_0x28acb8,_0x4bea39),_0x1ce993=this['randomColor'](),_0x3f22d0=Random[_0x386ae0(0x203)](0x1,0xa),_0x19ef4b=''+_0x3f22d0;return new Candy({'row':_0x5c48be,'col':_0x5243e3,'calories':_0x3f22d0,'glyph':_0x19ef4b,'color':_0x1ce993});}static['randomPosition'](_0x1a7ca7,_0x1e72d7,_0x242ffe){const _0x49857f=a0_0x4431c7;let _0x2af34b,_0x3ed503;do{_0x2af34b=Random[_0x49857f(0x203)](0x0,_0x1e72d7),_0x3ed503=Random[_0x49857f(0x203)](0x0,_0x242ffe);}while(_0x1a7ca7[_0x49857f(0x1e2)](_0x2af34b,_0x3ed503));return{'row':_0x2af34b,'col':_0x3ed503};}static[a0_0x4431c7(0x1e6)](){const _0x42fdca=a0_0x4431c7,_0x7bb437=['red','lime',_0x42fdca(0x208),'cyan','magenta',_0x42fdca(0x211),_0x42fdca(0x1fe)];return _0x7bb437[Random[_0x42fdca(0x203)](0x0,_0x7bb437[_0x42fdca(0x1e7)])];}[a0_0x4431c7(0x206)](_0x351e6e){const _0x1f86c8=a0_0x4431c7;_0x351e6e[_0x1f86c8(0x1ee)](this[_0x1f86c8(0x1f0)],this[_0x1f86c8(0x20c)],this[_0x1f86c8(0x20e)],this[_0x1f86c8(0x1f9)]);}}class RandANSI{constructor(_0x3dae56=0x1){const _0x4cc42b=a0_0x4431c7;this[_0x4cc42b(0x216)]=_0x3dae56;}[a0_0x4431c7(0x1f4)](_0x41721f){const _0x641578=a0_0x4431c7;this[_0x641578(0x216)]=_0x41721f;}['rand'](){const _0x312f75=a0_0x4431c7;return(this[_0x312f75(0x216)]=Number((BigInt(this['seed'])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x4431c7(0x203)](_0x4e378b,_0x7d86bc){const _0x39ed86=a0_0x4431c7;return _0x4e378b+this[_0x39ed86(0x20b)]()%(_0x7d86bc-_0x4e378b);}}function a0_0x3698(){const _0x34c2d1=['.\x20Metric:\x20','head','tail','steer','seed','assign','drawChars','colCount','ArrowLeft','snake','Ouch,\x20my\x20nose!','rowCount','8299240KBbEPa','\x20Turns:\x20','dRow','45680bmQeBM','ArrowUp','dCol','eat','intersects','pushBack','sleepTimeout','ArrowDown','randomColor','length','turnCount','setStatusLine','276shwbCz','gameOver','candy','3wwgckF','drawCharAt','Length:\x20','row','next','36338ynuFSf','statusString','setSeed','value','ArrowRight','willCrash','popBack','color','keydown','calories','8571258klmCGd','grid','pink','randomPosition','toFixed','headIntersects','headGlyph','randBetween','2253688NmkxRs','pushFront','draw','986874ufIzkW','yellow','randomCandy','1238610RcxVlk','rand','col','step','glyph','eraseCharAt','getElementById','orange'];a0_0x3698=function(){return _0x34c2d1;};return a0_0x3698();}const Random=new RandANSI();